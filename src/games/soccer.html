<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Z-Soccer Engine</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            user-select: none;
        }

        /* --- HUD (Interfaz de Juego) --- */
        #hud {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 40px;
            z-index: 10;
        }

        .score-board {
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 30px;
            border-radius: 12px;
            border: 2px solid #32ff7e;
            color: #fff;
            font-size: 32px;
            font-weight: 900;
            box-shadow: 0 0 20px rgba(50, 255, 126, 0.3);
        }

        .ability-bar {
            width: 120px;
            height: 12px;
            background: #222;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid #444;
        }

        #energy-fill {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #32ff7e, #1dd1a1);
            transition: width 0.1s;
        }

        /* --- BOTONES MOBILE (Opcional) --- */
        #controls {
            position: absolute;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 0 20px;
            box-sizing: border-box;
        }

        .btn {
            width: 70px;
            height: 70px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            touch-action: none;
        }

        .btn:active { background: #32ff7e; color: black; }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="hud">
        <div class="ability-container">
            <span style="color: #32ff7e; font-size: 10px; font-weight: bold;">TURBO [SHIFT]</span>
            <div class="ability-bar"><div id="energy-fill"></div></div>
        </div>
        <div class="score-board">
            <span id="p1-score">0</span> : <span id="p2-score">0</span>
        </div>
        <div style="text-align: right;">
            <span style="color: #ff4757; font-size: 10px; font-weight: bold;">BOT ENEMY</span>
            <div class="ability-bar" style="border-color: #ff4757;"><div id="bot-energy" style="width:100%; background:#ff4757;"></div></div>
        </div>
    </div>

    <div id="controls">
        <div style="display: flex; gap: 10px;">
            <div class="btn" id="btn-left">←</div>
            <div class="btn" id="btn-right">→</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <div class="btn" id="btn-jump">↑</div>
            <div class="btn" id="btn-shoot" style="border-color: #32ff7e;">⚡</div>
        </div>
    </div>

    <canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    // Ajuste de pantalla
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const gravity = 0.6;
    const friction = 0.98;

    const game = {
        p1Score: 0,
        p2Score: 0,
        energy: 100,
        isGoal: false
    };

    const keys = {};
    window.addEventListener('keydown', e => keys[e.code] = true);
    window.addEventListener('keyup', e => keys[e.code] = false);

    class Entity {
        constructor(x, y, color, isPlayer = false) {
            this.x = x;
            this.y = y;
            this.w = 50;
            this.h = 70;
            this.color = color;
            this.dx = 0;
            this.dy = 0;
            this.speed = 7;
            this.jumpForce = -15;
            this.grounded = false;
            this.isPlayer = isPlayer;
        }

        update() {
            this.dy += gravity;
            this.y += this.dy;
            this.x += this.dx;

            // Suelo
            if (this.y + this.h > canvas.height - 40) {
                this.y = canvas.height - 40 - this.h;
                this.dy = 0;
                this.grounded = true;
            }

            // Paredes
            if (this.x < 0) this.x = 0;
            if (this.x + this.w > canvas.width) this.x = canvas.width - this.w;
        }

        draw() {
            // Sombra
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath();
            ctx.ellipse(this.x + this.w/2, canvas.height - 35, 25, 10, 0, 0, Math.PI*2);
            ctx.fill();

            // Cuerpo (Bella UI)
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.roundRect(this.x, this.y, this.w, this.h, 10);
            ctx.fill();
            
            // Ojos
            ctx.fillStyle = 'white';
            const eyeX = this.isPlayer ? this.x + 30 : this.x + 5;
            ctx.fillRect(eyeX, this.y + 15, 12, 12);
        }
    }

    const player = new Entity(150, 400, '#32ff7e', true);
    const bot = new Entity(canvas.width - 200, 400, '#ff4757', false);

    const ball = {
        x: canvas.width / 2,
        y: 200,
        r: 18,
        dx: 0,
        dy: 0,
        update() {
            this.dy += gravity * 0.8;
            this.x += this.dx;
            this.y += this.dy;
            this.dx *= friction;

            // Rebotes
            if (this.y + this.r > canvas.height - 40) {
                this.y = canvas.height - 40 - this.r;
                this.dy *= -0.8;
            }
            if (this.x - this.r < 0 || this.x + this.r > canvas.width) {
                this.dx *= -0.8;
            }
        },
        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(0, 0, this.r, 0, Math.PI * 2);
            ctx.fill();
            
            // Detalles de balón
            ctx.strokeStyle = '#222';
            ctx.lineWidth = 2;
            for(let i=0; i<4; i++) {
                ctx.rotate(Math.PI/2);
                ctx.strokeRect(-5, -5, 10, 10);
            }
            ctx.restore();
        }
    };

    function checkCollision(p, b) {
        if (b.x + b.r > p.x && b.x - b.r < p.x + p.w &&
            b.y + b.r > p.y && b.y - b.r < p.y + p.h) {
            
            let force = p.isPlayer ? 10 : 8;
            b.dx = (b.x - (p.x + p.w / 2)) * 0.5;
            b.dy = -force;
        }
    }

    function handleAI() {
        // IA Simple: Sigue el balón si está en su mitad
        if (ball.x > canvas.width / 2) {
            if (ball.x > bot.x + bot.w) bot.dx = bot.speed * 0.8;
            else if (ball.x < bot.x) bot.dx = -bot.speed * 0.8;
            
            // Salto si la bola está alta
            if (ball.y < bot.y && bot.grounded) bot.dy = bot.jumpForce;
        } else {
            // Volver a portería
            if (bot.x < canvas.width - 100) bot.dx = bot.speed * 0.5;
            else bot.dx = 0;
        }
    }

    function drawPitch() {
        // Césped degradado
        const grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
        grad.addColorStop(0, '#10ac84');
        grad.addColorStop(1, '#0b8e6b');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Líneas de campo
        ctx.strokeStyle = 'rgba(255,255,255,0.2)';
        ctx.lineWidth = 5;
        ctx.strokeRect(50, 50, canvas.width - 100, canvas.height - 100);
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, 50);
        ctx.lineTo(canvas.width / 2, canvas.height - 50);
        ctx.stroke();

        // Porterías
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, canvas.height / 2 - 80, 10, 160); // P1
        ctx.fillRect(canvas.width - 10, canvas.height / 2 - 80, 10, 160); // P2
    }

    function loop() {
        drawPitch();

        // Inputs Jugador
        player.dx = 0;
        let currentSpeed = player.speed;
        
        // Habilidad: Turbo
        if (keys['ShiftLeft'] && game.energy > 0) {
            currentSpeed *= 1.5;
            game.energy -= 1;
        } else if (game.energy < 100) {
            game.energy += 0.2;
        }
        document.getElementById('energy-fill').style.width = game.energy + '%';

        if (keys['KeyA'] || keys['ArrowLeft']) player.dx = -currentSpeed;
        if (keys['KeyD'] || keys['ArrowRight']) player.dx = currentSpeed;
        if ((keys['KeyW'] || keys['ArrowUp'] || keys['Space']) && player.grounded) {
            player.dy = player.jumpForce;
            player.grounded = false;
        }

        handleAI();

        // Updates
        player.update();
        bot.update();
        ball.update();

        // Colisiones
        checkCollision(player, ball);
        checkCollision(bot, ball);

        // Lógica de Goles
        if (ball.x - ball.r < 10 && Math.abs(ball.y - canvas.height/2) < 80) {
            game.p2Score++;
            resetBall();
        }
        if (ball.x + ball.r > canvas.width - 10 && Math.abs(ball.y - canvas.height/2) < 80) {
            game.p1Score++;
            resetBall();
        }

        document.getElementById('p1-score').innerText = game.p1Score;
        document.getElementById('p2-score').innerText = game.p2Score;

        player.draw();
        bot.draw();
        ball.draw();

        requestAnimationFrame(loop);
    }

    function resetBall() {
        ball.x = canvas.width / 2;
        ball.y = 100;
        ball.dx = 0;
        ball.dy = 0;
    }

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    loop();
</script>
</body>
</html>